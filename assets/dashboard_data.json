async function fetchDataAndUpdate() {
  try {
    const timestamp = new Date().getTime();
    const response = await fetch('assets/dashboard_data.json?cb=' + timestamp);
    const data = await response.json();

    const elements = [
      {id: 'critical', value: data.critical, color: '#ef4444'},
      {id: 'abnormal', value: data.abnormal, color: '#f97316'},
      {id: 'medium', value: data.medium, color: '#facc15'},
      {id: 'investigated', value: data.investigated, color: '#22c55e'}
    ];

    elements.forEach(el => {
      const dom = document.getElementById(el.id);
      if(dom && dom.textContent.split(': ')[1] != el.value) {
        dom.style.color = '#ffffff'; // flash white
        setTimeout(() => dom.style.color = el.color, 250);
        dom.textContent = `${dom.textContent.split(':')[0]}: ${el.value}`;
      }
    });

    document.getElementById('updated').textContent = `Updated: ${data.updated}`;
  } catch (error) {
    console.error('Error fetching dashboard data:', error);
  }
}
